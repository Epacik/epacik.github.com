<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">js/discord-webhook.js</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-checkDisMsgForm">checkDisMsgForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sendWebhook">sendWebhook</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-validateEmail">validateEmail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-buildPage">buildPage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clMenu">clMenu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-opMenu">opMenu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-resize">resize</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-scroll">scroll</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-scrollCards">scrollCards</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-scrollUpButton">scrollUpButton</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getURLParam">getURLParam</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-goto">goto</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-navigate">navigate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setURLParam">setURLParam</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toggleLoading">toggleLoading</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-footer">footer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-pages">pages</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-fillIt">fillIt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-webhookURL">webhookURL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-icons">icons</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-elements">elements</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-inst">inst</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-win">win</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-lang">lang</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-debug">debug</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-underConstruction">underConstruction</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/discord-webhook.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/*jshint esversion:6*/

let webhookURL = &apos;https://discordapp.com/api/webhooks/427579628547342336/hhTXGxRGkOsXHg6cmUaMAxMS68u_rNC-0jI1T_dXyTgjxnvxONDbuHAuq0dOwLue6o2R&apos;;

let fillIt = &apos;Can\&apos;t be empty&apos;;

document.forms.disMsg.author.addEventListener(&apos;focus&apos;, function () {
  document.forms.disMsg.author.classList.remove(&apos;wrongInput&apos;);
  document.querySelector(&apos;#formAuthorTxt&apos;).innerHTML = lang.contact.sendQM.author;
});

document.forms.disMsg.email.addEventListener(&apos;focus&apos;, function () {
  document.forms.disMsg.email.classList.remove(&apos;wrongInput&apos;);
  document.querySelector(&apos;#formEmailTxt&apos;).innerHTML = lang.contact.sendQM.email;
});

document.forms.disMsg.message.addEventListener(&apos;focus&apos;, function () {
  document.forms.disMsg.message.classList.remove(&apos;wrongInput&apos;);
  document.querySelector(&apos;#formMessageTxt&apos;).innerHTML = lang.contact.sendQM.msg;
});

let checkDisMsgForm = function (disMsg) {
  let ret = true;
  if (disMsg.author.value == &apos;&apos;) {
    disMsg.author.classList.add(&apos;wrongInput&apos;);
    document.querySelector(&apos;#formAuthorTxt&apos;).innerHTML = `${lang.contact.sendQM.author}
      &lt;p class=&quot;formErrorMsg&quot;&gt;${lang.contact.sendQM.empty}&lt;/p&gt;`;
    ret = false;
  }

  if (disMsg.message.value == &apos;&apos;) {
    disMsg.message.classList.add(&apos;wrongInput&apos;);
    document.querySelector(&apos;#formMessageTxt&apos;).innerHTML = `${lang.contact.sendQM.msg}
      &lt;p class=&quot;formErrorMsg&quot;&gt;${lang.contact.sendQM.empty}&lt;/p&gt;`;
    ret = false;
  }

  if (disMsg.email.value == &apos;&apos;) {
    disMsg.email.classList.add(&apos;wrongInput&apos;);
    document.querySelector(&apos;#formEmailTxt&apos;).innerHTML = `${lang.contact.sendQM.email}
      &lt;p class=&quot;formErrorMsg&quot;&gt;${lang.contact.sendQM.empty}&lt;/p&gt;`;
    ret = false;
  } else {
    if (!validateEmail(disMsg.email.value)) {
      disMsg.email.classList.add(&apos;wrongInput&apos;);
      document.querySelector(&apos;#formEmailTxt&apos;).innerHTML = `E-Mail
        &lt;p class=&quot;formErrorMsg&quot;&gt;${lang.contact.sendQM.invalid}&lt;/p&gt;`;
      ret = false;
    }
  }

  return ret;
};

function validateEmail(sEmail) {
  var reEmail = /^(?:[\w\!\#\$\%\&amp;\&apos;\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&amp;\&apos;\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/;

  if (!sEmail.match(reEmail)) {
    return false;
  }

  return true;

}

let sendWebhook = function () {
  let disMsg = document.forms.disMsg;

  if (!checkDisMsgForm(disMsg)) {
    return;
  }

  const embed = {

    color: parseInt(&apos;0E95FB&apos;, 16),
    description: disMsg.message.value,
    title: disMsg.email.value,
    url: &apos;&apos;,
    image: { url: &apos;&apos; },
    thumbnail: { url: &apos;&apos; },
    footer: {
      text: &apos;&apos;,
      icon_url: &apos;&apos;,
    },
  };
  const props = [];
  for (const val of Object.values(embed)) {
    if (typeof val === &apos;string&apos;)
      props.push(val);
    else
      for (const v of Object.values(val))
        props.push(v);
  }

  //wy&#x15B;lij
  try {
    $.ajax({
      type: &apos;POST&apos;,
      url: webhookURL,
      crossDomain: true,
      data: JSON.stringify({
        content: &apos;&apos;,
        username: disMsg.author.value,
        avatar_url: &apos;&apos;,
        embeds: props.some(Boolean) ? [embed] : undefined,
      }),
      success: success =&gt; {
        console.log(success);
      },

      error: error =&gt; {
        console.log(error);
      },
    });
  } catch (e) {
    console.log(&apos;lol&apos;);
  }

  disMsg.reset();
  alert(&apos;Message was sent&apos;);
};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
